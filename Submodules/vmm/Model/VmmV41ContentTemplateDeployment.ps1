#
# Nutanix Virtual Machine Management APIs
# Manage the life-cycle of virtual machines hosted on Nutanix
# Version: 4.1.1
# Generated by OpenAPI Generator: https://openapi-generator.tech
#

<#
.SYNOPSIS

No summary available.

.DESCRIPTION

The template deployment model.

.PARAMETER VersionId
The identifier of a version.
.PARAMETER NumberOfVms
Number of VMs to be deployed.
.PARAMETER OverrideVmConfigMap
The map specifies the VM configuration overrides for each of the specified VM(s) to be created. The overrides can include the created VM Name, configuration and guest customization. For each VM to be created, the map has the index of the VM as the key and the corresponding VM override configurations as the value. 
.PARAMETER ClusterReference
The identifier of the cluster where the VM(s) will be created using a template. 
.OUTPUTS

VmmV41ContentTemplateDeployment<PSCustomObject>
#>

function Initialize-VmmV41ContentTemplateDeployment {
    [CmdletBinding()]
    Param (
        [Parameter(Position = 0, ValueFromPipelineByPropertyName = $true)]
        [ValidatePattern("^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$")]
        [String]
        ${VersionId},
        [Parameter(Position = 1, ValueFromPipelineByPropertyName = $true)]
        [Int32]
        ${NumberOfVms} = 1,
        [Parameter(Position = 2, ValueFromPipelineByPropertyName = $true)]
        [System.Collections.Hashtable]
        ${OverrideVmConfigMap},
        [Parameter(Position = 3, ValueFromPipelineByPropertyName = $true)]
        [ValidatePattern("^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$")]
        [String]
        ${ClusterReference}
    )

    Process {
        'Creating PSCustomObject: vmm => VmmV41ContentTemplateDeployment' | Write-Debug
        $PSBoundParameters | Out-DebugParameter | Write-Debug

        if ($null -eq $NumberOfVms) {
            throw "invalid value for 'NumberOfVms', 'NumberOfVms' cannot be null."
        }

        if ($NumberOfVms -gt 250) {
          throw "invalid value for 'NumberOfVms', must be smaller than or equal to 250."
        }

        if ($NumberOfVms -lt 1) {
          throw "invalid value for 'NumberOfVms', must be greater than or equal to 1."
        }

        if ($null -eq $ClusterReference) {
            throw "invalid value for 'ClusterReference', 'ClusterReference' cannot be null."
        }


        $PSO = [PSCustomObject]@{
            "versionId" = ${VersionId}
            "numberOfVms" = ${NumberOfVms}
            "overrideVmConfigMap" = ${OverrideVmConfigMap}
            "clusterReference" = ${ClusterReference}
        }


        return $PSO
    }
}

<#
.SYNOPSIS

Convert from JSON to VmmV41ContentTemplateDeployment<PSCustomObject>

.DESCRIPTION

Convert from JSON to VmmV41ContentTemplateDeployment<PSCustomObject>

.PARAMETER Json

Json object

.OUTPUTS

VmmV41ContentTemplateDeployment<PSCustomObject>
#>
function ConvertFrom-JsonToVmmV41ContentTemplateDeployment {
    Param(
        [AllowEmptyString()]
        [string]$Json
    )

    Process {
        'Converting JSON to PSCustomObject: vmm => VmmV41ContentTemplateDeployment' | Write-Debug
        $PSBoundParameters | Out-DebugParameter | Write-Debug

        $JsonParameters = ConvertFrom-Json -InputObject $Json

        # check if Json contains properties not defined in VmmV41ContentTemplateDeployment
        $AllProperties = ("versionId", "numberOfVms", "overrideVmConfigMap", "clusterReference")
        foreach ($name in $JsonParameters.PsObject.Properties.Name) {
            if (!($AllProperties.Contains($name))) {
                throw "Error! JSON key '$name' not found in the properties: $($AllProperties)"
            }
        }

        If ([string]::IsNullOrEmpty($Json) -or $Json -eq "{}") { # empty json
            throw "Error! Empty JSON cannot be serialized due to the required property 'numberOfVms' missing."
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "numberOfVms"))) {
            throw "Error! JSON cannot be serialized due to the required property 'numberOfVms' missing."
        } else {
            $NumberOfVms = $JsonParameters.PSobject.Properties["numberOfVms"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "clusterReference"))) {
            throw "Error! JSON cannot be serialized due to the required property 'clusterReference' missing."
        } else {
            $ClusterReference = $JsonParameters.PSobject.Properties["clusterReference"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "versionId"))) { #optional property not found
            $VersionId = $null
        } else {
            $VersionId = $JsonParameters.PSobject.Properties["versionId"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "overrideVmConfigMap"))) { #optional property not found
            $OverrideVmConfigMap = $null
        } else {
            $OverrideVmConfigMap = $JsonParameters.PSobject.Properties["overrideVmConfigMap"].value
        }

        $PSO = [PSCustomObject]@{
            "versionId" = ${VersionId}
            "numberOfVms" = ${NumberOfVms}
            "overrideVmConfigMap" = ${OverrideVmConfigMap}
            "clusterReference" = ${ClusterReference}
        }

        return $PSO
    }

}

